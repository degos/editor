function drawImage(a){var b=document.createElement("canvas");return b.height=400,b.width=400,b.getContext("2d").drawImage(a,0,0,b.width,b.height),b.toDataURL()}function drawImageSticker(a){var b=document.createElement("canvas");return b.height=400,b.width=400,b.getContext("2d").drawImage(imageProfile,0,0,b.width,b.height),b.getContext("2d").drawImage(a,0,0,b.width,b.height),b.toDataURL()}function downloadImage(a){a.href=result,a.download="generate.png"}function drawCover(a){var b=new Image;b.onload=function(){var a=new Image;a.setAttribute("class","ui fluid image"),result=drawImageSticker(b),a.src=result,$("#imageContainer").html(a)},b.src="static/image/sticker"+a+".png"}var state=!1,result="",imageProfile=new Image,load=" <img src='static/image/loader.svg' id='loadIcon' alt='cargando'>",loginBtn="<button class='fluid ui facebook button' id='login'><i class='facebook icon'></i>Ingresar con facebook</button>",logoutBn="<button class='fluid ui facebook button' id='logout'><i class='facebook icon'></i>Salir de facebook</button>";!function(a){var b,c="facebook-jssdk",d=a.getElementsByTagName("script")[0];a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="//connect.facebook.net/en_US/all.js",d.parentNode.insertBefore(b,d))}(document),window.fbAsyncInit=function(){function a(a){if(a.files&&a.files[0]){var b=$("#imageContainer"),c=new FileReader;c.onload=function(a){imageProfile.onload=function(){var a=new Image;a.setAttribute("class","ui fluid image"),a.src=drawImage(imageProfile),b.html(a),state=!0,$('input[name="coverOption"]').attr("checked",!1)},imageProfile.src=a.target.result},c.readAsDataURL(a.files[0])}else swal("Error al subir la imagen")}FB.init({appId:"195518980927618",status:!0,cookie:!0,xfbml:!0,oauth:!0}),FB.Event.subscribe("auth.statusChange",function(a){var b=$("#facebookOptions");if(a.authResponse){b.html(logoutBn);var c=$("#containerTemp"),d=$("#imageContainer");c.html(load),FB.api("/me",function(a){a.name&&(console.log(a),imageProfile.crossOrigin="Anonymous",imageProfile.onload=function(){var a=new Image;a.setAttribute("class","ui fluid image"),a.src=drawImage(imageProfile),d.html(a),state=!0,$('input[name="coverOption"]').attr("checked",!1)},imageProfile.src="https://graph.facebook.com/"+a.id+"/picture/?width=400&height=400")})}else b.html(loginBtn),location.reload()}),$("#downloand-image").on("click",function(){downloadImage(this)}),$("#uploadPhoto").on("change",function(){a(this)}),$(document).on("click","#login",function(){FB.login(function(){},{scope:"publish_actions"})}),$(document).on("click","#logout",function(){FB.logout()}),$(document).on("change","input[type=radio][name=coverOption]",function(){state?($("#downloand-image").removeClass("disabled"),drawCover(this.value)):alert("Inicia sesi√≥n o sube una imagen")})};